<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="tech.piis.modules.managment.mapper.RecommendBestMapper">

    <!--择优推荐-->
    <resultMap id="recommendBestResultMap" type="tech.piis.modules.managment.domain.po.RecommendBestPO">
        <id property="recommendId" column="RECOMMEND_ID"/>
        <result property="orgId" column="ORG_ID"/>
        <result property="recommendYear" column="RECOMMEND_YEAR"/>
        <result property="memberId" column="MEMBER_ID"/>
        <result property="memberName" column="MEMBER_NAME"/>
        <result property="memberUnit" column="MEMBER_UNIT"/>
        <result property="memberPost" column="MEMBER_POST"/>
        <result property="recommendType" column="RECOMMEND_TYPE"/>
        <result property="trainingName" column="TRAINING_NAME"/>
        <result property="beginDate" column="BEGIN_DATE"/>
        <result property="endDate" column="END_DATE"/>
        <result property="trainingPlace" column="TRAINING_PLACE"/>
        <result property="remark" column="REMARK"/>
        <result property="createdBy" column="CREATED_BY"/>
        <result property="createdTime" column="CREATED_TIME"/>
        <result property="updatedBy" column="UPDATED_BY"/>
        <result property="updatedTime" column="UPDATED_TIME"/>
        <result property="entId" column="ENT_ID"/>
    </resultMap>
    <!--择优推荐总览根据机构ID分组-->
    <select id="selectRecommendListByOrgId" resultMap="recommendBestResultMap">
        select
        RECOMMEND_ID,
        d.dept_name as MEMBER_UNIT,
        count(FIRSTBRANCH_ID) as amount
        from  recommend_best b
        join  sys_dept d on b.FIRSTBRANCH_ID = d.dept_id
        group by FIRSTBRANCH_ID
    </select>
    <!--根据条件动态查询择优推荐-->
    <!--<select id="selectListByConditions" resultMap="recommendBestResultMap">
        select
        RECOMMEND_ID,
        ORG_ID,
        RECOMMEND_YEAR,
        MEMBER_ID,
        MEMBER_NAME,
        MEMBER_UNIT,
        MEMBER_POST,
        RECOMMEND_TYPE,
        TRAINING_NAME,
        BEGIN_DATE,
        END_DATE,
        TRAINING_PLACE
        from
        recommend_best
        <where>
            <if test="memberUnit !=null and memberUnit !=''">
                AND MEMBER_UNIT = #{memberUnit}
            </if>
            <if test="memberName !=null and memberName !=''">
                AND MEMBER_NAME = #{memberName}
            </if>
            <if test="recommendYear !=null and recommendYear !=''">
                AND RECOMMEND_YEAR = #{recommendYear}
            </if>
            <if test="recommendType !=null and recommendType !=''">
                AND RECOMMEND_TYPE = #{recommendType}
            </if>
        </where>
    </select>-->
</mapper>